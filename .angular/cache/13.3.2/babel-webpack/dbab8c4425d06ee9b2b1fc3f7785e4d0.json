{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Documentos\\\\jose\\\\bcp\\\\Cursos NET\\\\bcp\\\\angularasignacion\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { MatTableDataSource } from '@angular/material/table';\nlet CargasigaComponent = class CargasigaComponent {\n  constructor(route, formbulider, api, router) {\n    this.route = route;\n    this.formbulider = formbulider;\n    this.api = api;\n    this.router = router;\n    this.i = 0;\n    this.idtem = 0;\n    this.textsiga = \"\";\n    this.totalsiga = 0;\n    this.sumatotal = []; // sort:any;\n\n    this.page = 1;\n    this.count = 0;\n    this.tableSize = 12;\n    this.tableSizes = [3, 6, 9, 12];\n    this.AsignacionCarga = [];\n    this.dataSourcesiga = new MatTableDataSource();\n  }\n\n  set matPaginator(paginator) {\n    this.dataSourcesiga.paginator = paginator; /// @ViewChild('scheduledOrdersPaginator') sort: MatSort;\n  }\n\n  ngOnInit() {\n    this.listarsiga();\n    this.idtem = 0;\n  }\n\n  listarsiga() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.api.getAllCargaSiga().subscribe(datacarga => {\n        _this.AsignacionCarga = datacarga;\n        _this.dataSourcesiga = new MatTableDataSource(datacarga); ///  this.dataSourcesiga .sort = this.sort\n        /// this.sort.sort(<MatSortable>{\n        //   id: 'name',\n        //   start: 'asc'\n        //   });\n\n        _this.getusersiga(_this.AsignacionCarga);\n      });\n    })();\n  }\n\n  onTableDataChange(event) {\n    this.page = event;\n    this.listarsiga();\n  }\n\n  onTableSizeChange(event) {\n    this.tableSize = event.target.value;\n    this.page = 1;\n    this.listarsiga();\n  }\n\n  getusersiga(datauser) {\n    this.iddata = datauser;\n    this.i = 0;\n\n    for (let j = 0; j < this.iddata.length; j++) {\n      this.retornoidsiga = this.iddata[j].matriculaUsuario;\n      this.api.getUsuario(this.retornoidsiga).subscribe(rsult => {\n        this.Asignacionusuario = rsult;\n        this.iditem = this.AsignacionCarga.length; //this.findsum(this.Asignacionusuario,this.iditem); \n        // console.log(rsult);  console.log(this.iditem);  \n      });\n    }\n  }\n\n  findsum(data, item) {\n    //  window.location.reload();\n    this.textsiga = \"\";\n    this.totalsiga = 0;\n    this.valuesiga = data; // this.i=0   \n    //   console.log(this.valuesiga);  \n\n    console.log(this.totalsiga);\n    debugger; // do {\n\n    if (this.i < item) //for(let ix=0;ix<item;ix++)\n      {\n        for (let j = 0; j < this.valuesiga.length; j++) {\n          this.totalsiga += this.valuesiga[j].porcentaje;\n        }\n\n        this.sumatotal[this.i] = this.totalsiga;\n        this.i = this.i + 1;\n        debugger; //  this.totalsiga=0;\n      } //while (this.i > item);\n    // if ((this.totalsiga) == 100 ){\n    //   this.textsiga = \"Asignación Completada\";\n    //   this.inputColorStr = \"blue\";\n    //   console.log(this.textsiga);  \n    //  }else { this.textsiga =\"Por favor revisar el % Asignación\";\n    // this.inputColorStr = \"red\";\n    // console.log(this.textsiga);  \n    // }\n    // return this.textsiga;\n    // return this.sumatotal;\n\n  }\n\n  deletesiga(id) {\n    if (confirm(\"¿Estás seguro que desea eliminar\")) {\n      this.api.deleteSiga(id).subscribe(res => {\n        this.AsignacionCarga = this.AsignacionCarga.filter(item => item.idCarga !== id);\n      });\n    }\n  }\n\n};\n\n__decorate([ViewChild('scheduledOrdersPaginator')], CargasigaComponent.prototype, \"matPaginator\", null);\n\nCargasigaComponent = __decorate([Component({\n  selector: 'app-cargasiga',\n  templateUrl: './cargasiga.component.html',\n  styleUrls: ['./cargasiga.component.css']\n})], CargasigaComponent);\nexport { CargasigaComponent };","map":{"version":3,"sources":["C:/Documentos/jose/bcp/Cursos NET/bcp/angularasignacion/src/app/cargasiga/cargasiga.component.ts"],"names":["__decorate","Component","ViewChild","MatTableDataSource","CargasigaComponent","constructor","route","formbulider","api","router","i","idtem","textsiga","totalsiga","sumatotal","page","count","tableSize","tableSizes","AsignacionCarga","dataSourcesiga","matPaginator","paginator","ngOnInit","listarsiga","getAllCargaSiga","subscribe","datacarga","getusersiga","onTableDataChange","event","onTableSizeChange","target","value","datauser","iddata","j","length","retornoidsiga","matriculaUsuario","getUsuario","rsult","Asignacionusuario","iditem","findsum","data","item","valuesiga","console","log","porcentaje","deletesiga","id","confirm","deleteSiga","res","filter","idCarga","prototype","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component, ViewChild } from '@angular/core';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nlet CargasigaComponent = class CargasigaComponent {\r\n    constructor(route, formbulider, api, router) {\r\n        this.route = route;\r\n        this.formbulider = formbulider;\r\n        this.api = api;\r\n        this.router = router;\r\n        this.i = 0;\r\n        this.idtem = 0;\r\n        this.textsiga = \"\";\r\n        this.totalsiga = 0;\r\n        this.sumatotal = [];\r\n        // sort:any;\r\n        this.page = 1;\r\n        this.count = 0;\r\n        this.tableSize = 12;\r\n        this.tableSizes = [3, 6, 9, 12];\r\n        this.AsignacionCarga = [];\r\n        this.dataSourcesiga = new MatTableDataSource();\r\n    }\r\n    set matPaginator(paginator) {\r\n        this.dataSourcesiga.paginator = paginator;\r\n        /// @ViewChild('scheduledOrdersPaginator') sort: MatSort;\r\n    }\r\n    ngOnInit() {\r\n        this.listarsiga();\r\n        this.idtem = 0;\r\n    }\r\n    async listarsiga() {\r\n        this.api.getAllCargaSiga().subscribe(datacarga => {\r\n            this.AsignacionCarga = datacarga;\r\n            this.dataSourcesiga = new MatTableDataSource(datacarga);\r\n            ///  this.dataSourcesiga .sort = this.sort\r\n            /// this.sort.sort(<MatSortable>{\r\n            //   id: 'name',\r\n            //   start: 'asc'\r\n            //   });\r\n            this.getusersiga(this.AsignacionCarga);\r\n        });\r\n    }\r\n    onTableDataChange(event) {\r\n        this.page = event;\r\n        this.listarsiga();\r\n    }\r\n    onTableSizeChange(event) {\r\n        this.tableSize = event.target.value;\r\n        this.page = 1;\r\n        this.listarsiga();\r\n    }\r\n    getusersiga(datauser) {\r\n        this.iddata = datauser;\r\n        this.i = 0;\r\n        for (let j = 0; j < this.iddata.length; j++) {\r\n            this.retornoidsiga = this.iddata[j].matriculaUsuario;\r\n            this.api.getUsuario(this.retornoidsiga).subscribe((rsult) => {\r\n                this.Asignacionusuario = rsult;\r\n                this.iditem = this.AsignacionCarga.length;\r\n                //this.findsum(this.Asignacionusuario,this.iditem); \r\n                // console.log(rsult);  console.log(this.iditem);  \r\n            });\r\n        }\r\n    }\r\n    findsum(data, item) {\r\n        //  window.location.reload();\r\n        this.textsiga = \"\";\r\n        this.totalsiga = 0;\r\n        this.valuesiga = data;\r\n        // this.i=0   \r\n        //   console.log(this.valuesiga);  \r\n        console.log(this.totalsiga);\r\n        debugger;\r\n        // do {\r\n        if (this.i < item) \r\n        //for(let ix=0;ix<item;ix++)\r\n        {\r\n            for (let j = 0; j < this.valuesiga.length; j++) {\r\n                this.totalsiga += this.valuesiga[j].porcentaje;\r\n            }\r\n            this.sumatotal[this.i] = this.totalsiga;\r\n            this.i = this.i + 1;\r\n            debugger;\r\n            //  this.totalsiga=0;\r\n        }\r\n        //while (this.i > item);\r\n        // if ((this.totalsiga) == 100 ){\r\n        //   this.textsiga = \"Asignación Completada\";\r\n        //   this.inputColorStr = \"blue\";\r\n        //   console.log(this.textsiga);  \r\n        //  }else { this.textsiga =\"Por favor revisar el % Asignación\";\r\n        // this.inputColorStr = \"red\";\r\n        // console.log(this.textsiga);  \r\n        // }\r\n        // return this.textsiga;\r\n        // return this.sumatotal;\r\n    }\r\n    deletesiga(id) {\r\n        if (confirm(\"¿Estás seguro que desea eliminar\")) {\r\n            this.api.deleteSiga(id).subscribe(res => {\r\n                this.AsignacionCarga = this.AsignacionCarga.filter(item => item.idCarga !== id);\r\n            });\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    ViewChild('scheduledOrdersPaginator')\r\n], CargasigaComponent.prototype, \"matPaginator\", null);\r\nCargasigaComponent = __decorate([\r\n    Component({\r\n        selector: 'app-cargasiga',\r\n        templateUrl: './cargasiga.component.html',\r\n        styleUrls: ['./cargasiga.component.css']\r\n    })\r\n], CargasigaComponent);\r\nexport { CargasigaComponent };\r\n"]},"metadata":{},"sourceType":"module"}