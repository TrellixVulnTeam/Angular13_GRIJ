{"ast":null,"code":"import 'chart.js';\nimport * as XLSX from 'xlsx';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../core/services/api.service\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/common\";\n\nfunction DashboardComponent_tr_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 10);\n    i0.ɵɵtext(23, \"Editar\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"td\")(25, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_tr_33_Template_button_click_25_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const a_r1 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.deleteasignar(a_r1.idPorcentajeAsignacion);\n    });\n    i0.ɵɵtext(26, \"Borrar\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const a_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.idPorcentajeAsignacion);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.matriculaUsuario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.nombreUsuario + \" \" + a_r1.apellidopaternoUsuario + \" \" + a_r1.apellidomaternoUsuario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.especialidad);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", a_r1.porcentaje, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", a_r1 == null ? null : a_r1.rol == null ? null : a_r1.rol.sqRol, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", a_r1 == null ? null : a_r1.squad == null ? null : a_r1.squad.nombreSquad, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.tagNamesrol[i_r2], \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.comentarios);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r1.estado);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/editar/\", a_r1.idPorcentajeAsignacion, \"\");\n  }\n}\n\nexport class DashboardComponent {\n  //roles: ListaRol[] = [];\n  constructor(route, formbulider, api, router) {\n    this.route = route;\n    this.formbulider = formbulider;\n    this.api = api;\n    this.router = router;\n    this.fileName = 'ExcelSheet.xlsx';\n    this.exportList = [];\n    this.total = 0;\n    this.Asignacionusuario = [];\n    this.tagNamesrol = [];\n    this.tagNamesapp = [];\n    this.tagNamessquad = [];\n  }\n\n  ngOnInit() {\n    this.getuser();\n  }\n\n  getuser() {\n    this.id = this.route.snapshot.paramMap.get('id');\n    this.retornoid = this.id;\n    this.result = this.api.getUsuario(this.retornoid);\n    this.api.getUsuario(this.retornoid).subscribe(rsult => {\n      this.Asignacionusuario = rsult;\n      debugger;\n      this.findsum(this.Asignacionusuario);\n      this.returnall(this.Asignacionusuario); // console.log(rsult);  \n    });\n  }\n\n  returnall(idtodos) {\n    this.dataall = idtodos;\n\n    for (let j = 0; j < this.dataall.length; j++) {\n      this.codrolid = this.dataall[j].idRol;\n      this.codappid = this.dataall[j].idAplicativo;\n      this.codsquad = this.dataall[j].idSquad;\n      this.api.getappid(this.codappid).subscribe(appdata => {\n        this.appname = appdata;\n        this.tagNamesapp[j] = appdata.codAplicativo;\n      });\n      this.api.getroldid(this.codrolid).subscribe(roldata => {\n        this.rolname = roldata;\n        this.tagNamesrol[j] = roldata.sqRol;\n      });\n      this.api.getsquadid(this.codsquad).subscribe(squaddata => {\n        this.squadname = squaddata;\n        this.tagNamessquad[j] = squaddata.nombreSquad;\n      });\n    }\n  }\n\n  idreturnrol(idroles) {\n    this.rolid = idroles;\n\n    for (let j = 0; j < this.rolid.length; j++) {\n      this.codrolid = this.rolid[j].idRol;\n      this.api.getroldid(this.codrolid).subscribe(roldata => {\n        this.rolname = roldata;\n        this.tagNamesrol[j] = roldata.sqRol;\n      });\n    }\n  }\n\n  idreturnapp(idapp) {\n    this.appid = idapp;\n\n    for (let j = 0; j < this.appid.length; j++) {\n      this.codappid = this.appid[j].idAplicativo;\n      this.api.getappid(this.codappid).subscribe(app => {\n        this.appname = app;\n        this.tagNamesapp[j] = app.codaplicativo;\n      });\n    }\n  }\n\n  idreturnsquad(datasquad) {\n    this.squadid = datasquad;\n\n    for (let j = 0; j < this.squadid.length; j++) {\n      this.codsquad = this.squadid[j].idSquad;\n      this.api.getsquadid(this.codsquad).subscribe(squaddata => {\n        this.squadname = squaddata;\n        this.tagNamessquad[j] = squaddata.nombreSquad;\n      });\n    }\n  }\n\n  idreturn(matricula) {\n    this.value = matricula;\n    console.log(this.value);\n    this.retornoid = this.value[0].matriculaUsuario;\n    this.rolid = this.value[0].idRol; // console.log(this.retornoid)\n  }\n\n  findsum(data) {\n    this.text = \"\";\n    this.total = 0;\n    this.value = data; // console.log(this.value);  \n    // console.log(this.total);  \n\n    for (let j = 0; j < data.length; j++) {\n      this.total += this.value[j].porcentaje;\n    }\n\n    this.total = this.trunc(this.total, 3);\n\n    if (this.total == 100) {\n      this.text = \"Asignación Completada\";\n      this.inputColorStr = \"blue\";\n      console.log(this.text);\n    } else {\n      this.text = \"Por favor revisar el % Asignación\";\n      this.inputColorStr = \"red\";\n      console.log(this.text);\n    }\n\n    return this.text;\n  }\n\n  trunc(xe, posiciones = 0) {\n    var s = xe.toString();\n    var l = s.length;\n    var decimalLength = s.indexOf('.') + 1;\n    var numStr = s.substr(0, decimalLength + posiciones);\n    return Number(numStr);\n  }\n\n  deleteasignar(id) {\n    //  if (confirm(`¿Realmente quieres eliminar a ${this.idasigna}?`)) {\n    if (confirm(`¿Realmente quieres eliminar la asignación seleccionada?`)) {\n      this.api.deleteAsignacion(id).subscribe(res => {\n        this.Asignacionusuario = this.Asignacionusuario.filter(item => item.idPorcentajeAsignacion !== id);\n        this.findsum(this.Asignacionusuario);\n      });\n    }\n  }\n\n  exportexcel() {\n    /* table id is passed over here */\n    let element = document.getElementById('excel-table');\n    const ws = XLSX.utils.table_to_sheet(element);\n    /* generate workbook and add the worksheet */\n\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');\n    /* save to file */\n\n    XLSX.writeFile(wb, this.fileName);\n  }\n\n}\n\nDashboardComponent.ɵfac = function DashboardComponent_Factory(t) {\n  return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ApiService), i0.ɵɵdirectiveInject(i1.Router));\n};\n\nDashboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DashboardComponent,\n  selectors: [[\"app-dashboard\"]],\n  decls: 48,\n  vars: 12,\n  consts: [[1, \"row\"], [1, \"col-12\", \"text-center\", \"my-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"routerLink\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [\"id\", \"table\", \"name\", \"table\", \"id\", \"excel-table\", 1, \"table\", \"table-hover\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"3\"], [\"colspan\", \"1\"], [\"colspan\", \"4\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function DashboardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Lista de Asignaci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1)(4, \"a\", 2);\n      i0.ɵɵtext(5, \"Agregar Asignaci\\u00F3n\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"a\", 3);\n      i0.ɵɵlistener(\"click\", function DashboardComponent_Template_a_click_6_listener() {\n        return ctx.exportexcel();\n      });\n      i0.ɵɵelementStart(7, \"mat-icon\");\n      i0.ɵɵtext(8, \" cloud_download\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(9, \"table\", 4)(10, \"thead\")(11, \"tr\")(12, \"th\", 5);\n      i0.ɵɵtext(13, \"ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\", 5);\n      i0.ɵɵtext(15, \"MATRICULA\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"th\", 5);\n      i0.ɵɵtext(17, \"NOMBRE COMPLETO \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\", 5);\n      i0.ɵɵtext(19, \"ESPECIALIDAD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"th\", 5);\n      i0.ɵɵtext(21, \"% ASIGNACION\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"th\", 5);\n      i0.ɵɵtext(23, \"COD APP\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"th\", 5);\n      i0.ɵɵtext(25, \"SQUAD\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"th\", 5);\n      i0.ɵɵtext(27, \"ROL\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"th\", 5);\n      i0.ɵɵtext(29, \"COMENTARIOS\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"th\", 5);\n      i0.ɵɵtext(31, \"ESTADO\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(32, \"tbody\");\n      i0.ɵɵtemplate(33, DashboardComponent_tr_33_Template, 27, 11, \"tr\", 6);\n      i0.ɵɵpipe(34, \"async\");\n      i0.ɵɵelement(35, \"tr\");\n      i0.ɵɵelementStart(36, \"tr\");\n      i0.ɵɵelement(37, \"td\", 7);\n      i0.ɵɵelementStart(38, \"td\", 8)(39, \"b\");\n      i0.ɵɵtext(40, \"TOTAL:\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(41, \"td\", 8)(42, \"b\");\n      i0.ɵɵtext(43);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(44, \"td\", 8)(45, \"b\");\n      i0.ɵɵtext(46);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(47, \"td\", 9);\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/agregar/\", ctx.retornoid, \"\");\n      i0.ɵɵadvance(29);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(34, 10, ctx.result));\n      i0.ɵɵadvance(8);\n      i0.ɵɵstyleMapInterpolate1(\"color: \", ctx.inputColorStr, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\", ctx.total, \" % \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleMapInterpolate1(\"color: \", ctx.inputColorStr, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", ctx.text, \" \");\n    }\n  },\n  directives: [i1.RouterLinkWithHref, i4.MatIcon, i5.NgForOf, i1.RouterLink],\n  pipes: [i5.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkYXNoYm9hcmQuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["C:/Documentos/jose/bcp/Cursos NET/bcp/angularasignacion/src/app/dashboard/dashboard.component.ts"],"names":["XLSX","i0","i1","i2","i3","i4","i5","DashboardComponent_tr_33_Template","rf","ctx","_r8","ɵɵgetCurrentView","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","DashboardComponent_tr_33_Template_button_click_25_listener","restoredCtx","ɵɵrestoreView","a_r1","$implicit","ctx_r7","ɵɵnextContext","deleteasignar","idPorcentajeAsignacion","i_r2","index","ctx_r0","ɵɵadvance","ɵɵtextInterpolate","matriculaUsuario","nombreUsuario","apellidopaternoUsuario","apellidomaternoUsuario","especialidad","ɵɵtextInterpolate1","porcentaje","rol","sqRol","squad","nombreSquad","tagNamesrol","comentarios","estado","ɵɵpropertyInterpolate1","DashboardComponent","constructor","route","formbulider","api","router","fileName","exportList","total","Asignacionusuario","tagNamesapp","tagNamessquad","ngOnInit","getuser","id","snapshot","paramMap","get","retornoid","result","getUsuario","subscribe","rsult","findsum","returnall","idtodos","dataall","j","length","codrolid","idRol","codappid","idAplicativo","codsquad","idSquad","getappid","appdata","appname","codAplicativo","getroldid","roldata","rolname","getsquadid","squaddata","squadname","idreturnrol","idroles","rolid","idreturnapp","idapp","appid","app","codaplicativo","idreturnsquad","datasquad","squadid","idreturn","matricula","value","console","log","data","text","trunc","inputColorStr","xe","posiciones","s","toString","l","decimalLength","indexOf","numStr","substr","Number","confirm","deleteAsignacion","res","filter","item","exportexcel","element","document","getElementById","ws","utils","table_to_sheet","wb","book_new","book_append_sheet","writeFile","ɵfac","DashboardComponent_Factory","t","ɵɵdirectiveInject","ActivatedRoute","FormBuilder","ApiService","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","DashboardComponent_Template","DashboardComponent_Template_a_click_6_listener","ɵɵtemplate","ɵɵpipe","ɵɵelement","ɵɵproperty","ɵɵpipeBind1","ɵɵstyleMapInterpolate1","directives","RouterLinkWithHref","MatIcon","NgForOf","RouterLink","pipes","AsyncPipe","styles"],"mappings":"AAAA,OAAO,UAAP;AACA,OAAO,KAAKA,IAAZ,MAAsB,MAAtB;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,8BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,wBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;;AACA,SAASC,iCAAT,CAA2CC,EAA3C,EAA+CC,GAA/C,EAAoD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC9D,UAAME,GAAG,GAAGT,EAAE,CAACU,gBAAH,EAAZ;;AACAV,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,CAA3B,EAA8B,IAA9B;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,CAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,EAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,EAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,EAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,EAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,EAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,EAAV;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,EAA5B,EAAgC,QAAhC,EAA0C,EAA1C;AACAX,IAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,QAAd;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACAb,IAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,EAA5B,EAAgC,QAAhC,EAA0C,EAA1C;AACAX,IAAAA,EAAE,CAACc,UAAH,CAAc,OAAd,EAAuB,SAASC,0DAAT,GAAsE;AAAE,YAAMC,WAAW,GAAGhB,EAAE,CAACiB,aAAH,CAAiBR,GAAjB,CAApB;AAA2C,YAAMS,IAAI,GAAGF,WAAW,CAACG,SAAzB;AAAoC,YAAMC,MAAM,GAAGpB,EAAE,CAACqB,aAAH,EAAf;AAAmC,aAAOD,MAAM,CAACE,aAAP,CAAqBJ,IAAI,CAACK,sBAA1B,CAAP;AAA2D,KAA5Q;AACAvB,IAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,QAAd;AACAZ,IAAAA,EAAE,CAACa,YAAH;AACH;;AAAC,MAAIN,EAAE,GAAG,CAAT,EAAY;AACV,UAAMW,IAAI,GAAGV,GAAG,CAACW,SAAjB;AACA,UAAMK,IAAI,GAAGhB,GAAG,CAACiB,KAAjB;AACA,UAAMC,MAAM,GAAG1B,EAAE,CAACqB,aAAH,EAAf;AACArB,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAAC4B,iBAAH,CAAqBV,IAAI,CAACK,sBAA1B;AACAvB,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAAC4B,iBAAH,CAAqBV,IAAI,CAACW,gBAA1B;AACA7B,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAAC4B,iBAAH,CAAqBV,IAAI,CAACY,aAAL,GAAqB,GAArB,GAA2BZ,IAAI,CAACa,sBAAhC,GAAyD,GAAzD,GAA+Db,IAAI,CAACc,sBAAzF;AACAhC,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAAC4B,iBAAH,CAAqBV,IAAI,CAACe,YAA1B;AACAjC,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAACkC,kBAAH,CAAsB,GAAtB,EAA2BhB,IAAI,CAACiB,UAAhC,EAA4C,GAA5C;AACAnC,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAACkC,kBAAH,CAAsB,GAAtB,EAA2BhB,IAAI,IAAI,IAAR,GAAe,IAAf,GAAsBA,IAAI,CAACkB,GAAL,IAAY,IAAZ,GAAmB,IAAnB,GAA0BlB,IAAI,CAACkB,GAAL,CAASC,KAApF,EAA2F,GAA3F;AACArC,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAACkC,kBAAH,CAAsB,GAAtB,EAA2BhB,IAAI,IAAI,IAAR,GAAe,IAAf,GAAsBA,IAAI,CAACoB,KAAL,IAAc,IAAd,GAAqB,IAArB,GAA4BpB,IAAI,CAACoB,KAAL,CAAWC,WAAxF,EAAqG,GAArG;AACAvC,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAACkC,kBAAH,CAAsB,GAAtB,EAA2BR,MAAM,CAACc,WAAP,CAAmBhB,IAAnB,CAA3B,EAAqD,GAArD;AACAxB,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAAC4B,iBAAH,CAAqBV,IAAI,CAACuB,WAA1B;AACAzC,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAAC4B,iBAAH,CAAqBV,IAAI,CAACwB,MAA1B;AACA1C,IAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,IAAAA,EAAE,CAAC2C,sBAAH,CAA0B,YAA1B,EAAwC,UAAxC,EAAoDzB,IAAI,CAACK,sBAAzD,EAAiF,EAAjF;AACH;AAAE;;AACH,OAAO,MAAMqB,kBAAN,CAAyB;AAC5B;AACAC,EAAAA,WAAW,CAACC,KAAD,EAAQC,WAAR,EAAqBC,GAArB,EAA0BC,MAA1B,EAAkC;AACzC,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,QAAL,GAAgB,iBAAhB;AACA,SAAKC,UAAL,GAAkB,EAAlB;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,iBAAL,GAAyB,EAAzB;AACA,SAAKb,WAAL,GAAmB,EAAnB;AACA,SAAKc,WAAL,GAAmB,EAAnB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACH;;AACDC,EAAAA,QAAQ,GAAG;AACP,SAAKC,OAAL;AACH;;AACDA,EAAAA,OAAO,GAAG;AACN,SAAKC,EAAL,GAAU,KAAKZ,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,IAAjC,CAAV;AACA,SAAKC,SAAL,GAAiB,KAAKJ,EAAtB;AACA,SAAKK,MAAL,GAAc,KAAKf,GAAL,CAASgB,UAAT,CAAoB,KAAKF,SAAzB,CAAd;AACA,SAAKd,GAAL,CAASgB,UAAT,CAAoB,KAAKF,SAAzB,EAAoCG,SAApC,CAA+CC,KAAD,IAAW;AACrD,WAAKb,iBAAL,GAAyBa,KAAzB;AACA;AACA,WAAKC,OAAL,CAAa,KAAKd,iBAAlB;AACA,WAAKe,SAAL,CAAe,KAAKf,iBAApB,EAJqD,CAKrD;AACH,KAND;AAOH;;AACDe,EAAAA,SAAS,CAACC,OAAD,EAAU;AACf,SAAKC,OAAL,GAAeD,OAAf;;AACA,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKD,OAAL,CAAaE,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,WAAKE,QAAL,GAAgB,KAAKH,OAAL,CAAaC,CAAb,EAAgBG,KAAhC;AACA,WAAKC,QAAL,GAAgB,KAAKL,OAAL,CAAaC,CAAb,EAAgBK,YAAhC;AACA,WAAKC,QAAL,GAAgB,KAAKP,OAAL,CAAaC,CAAb,EAAgBO,OAAhC;AACA,WAAK9B,GAAL,CAAS+B,QAAT,CAAkB,KAAKJ,QAAvB,EAAiCV,SAAjC,CAA4Ce,OAAD,IAAa;AACpD,aAAKC,OAAL,GAAeD,OAAf;AACA,aAAK1B,WAAL,CAAiBiB,CAAjB,IAAsBS,OAAO,CAACE,aAA9B;AACH,OAHD;AAIA,WAAKlC,GAAL,CAASmC,SAAT,CAAmB,KAAKV,QAAxB,EAAkCR,SAAlC,CAA6CmB,OAAD,IAAa;AACrD,aAAKC,OAAL,GAAeD,OAAf;AACA,aAAK5C,WAAL,CAAiB+B,CAAjB,IAAsBa,OAAO,CAAC/C,KAA9B;AACH,OAHD;AAIA,WAAKW,GAAL,CAASsC,UAAT,CAAoB,KAAKT,QAAzB,EAAmCZ,SAAnC,CAA8CsB,SAAD,IAAe;AACxD,aAAKC,SAAL,GAAiBD,SAAjB;AACA,aAAKhC,aAAL,CAAmBgB,CAAnB,IAAwBgB,SAAS,CAAChD,WAAlC;AACH,OAHD;AAIH;AACJ;;AACDkD,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,SAAKC,KAAL,GAAaD,OAAb;;AACA,SAAK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKoB,KAAL,CAAWnB,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxC,WAAKE,QAAL,GAAgB,KAAKkB,KAAL,CAAWpB,CAAX,EAAcG,KAA9B;AACA,WAAK1B,GAAL,CAASmC,SAAT,CAAmB,KAAKV,QAAxB,EAAkCR,SAAlC,CAA6CmB,OAAD,IAAa;AACrD,aAAKC,OAAL,GAAeD,OAAf;AACA,aAAK5C,WAAL,CAAiB+B,CAAjB,IAAsBa,OAAO,CAAC/C,KAA9B;AACH,OAHD;AAIH;AACJ;;AACDuD,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,SAAKC,KAAL,GAAaD,KAAb;;AACA,SAAK,IAAItB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKuB,KAAL,CAAWtB,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AACxC,WAAKI,QAAL,GAAgB,KAAKmB,KAAL,CAAWvB,CAAX,EAAcK,YAA9B;AACA,WAAK5B,GAAL,CAAS+B,QAAT,CAAkB,KAAKJ,QAAvB,EAAiCV,SAAjC,CAA4C8B,GAAD,IAAS;AAChD,aAAKd,OAAL,GAAec,GAAf;AACA,aAAKzC,WAAL,CAAiBiB,CAAjB,IAAsBwB,GAAG,CAACC,aAA1B;AACH,OAHD;AAIH;AACJ;;AACDC,EAAAA,aAAa,CAACC,SAAD,EAAY;AACrB,SAAKC,OAAL,GAAeD,SAAf;;AACA,SAAK,IAAI3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK4B,OAAL,CAAa3B,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,WAAKM,QAAL,GAAgB,KAAKsB,OAAL,CAAa5B,CAAb,EAAgBO,OAAhC;AACA,WAAK9B,GAAL,CAASsC,UAAT,CAAoB,KAAKT,QAAzB,EAAmCZ,SAAnC,CAA8CsB,SAAD,IAAe;AACxD,aAAKC,SAAL,GAAiBD,SAAjB;AACA,aAAKhC,aAAL,CAAmBgB,CAAnB,IAAwBgB,SAAS,CAAChD,WAAlC;AACH,OAHD;AAIH;AACJ;;AACD6D,EAAAA,QAAQ,CAACC,SAAD,EAAY;AAChB,SAAKC,KAAL,GAAaD,SAAb;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKF,KAAjB;AACA,SAAKxC,SAAL,GAAiB,KAAKwC,KAAL,CAAW,CAAX,EAAczE,gBAA/B;AACA,SAAK8D,KAAL,GAAa,KAAKW,KAAL,CAAW,CAAX,EAAc5B,KAA3B,CAJgB,CAKhB;AACH;;AACDP,EAAAA,OAAO,CAACsC,IAAD,EAAO;AACV,SAAKC,IAAL,GAAY,EAAZ;AACA,SAAKtD,KAAL,GAAa,CAAb;AACA,SAAKkD,KAAL,GAAaG,IAAb,CAHU,CAIV;AACA;;AACA,SAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkC,IAAI,CAACjC,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,WAAKnB,KAAL,IAAc,KAAKkD,KAAL,CAAW/B,CAAX,EAAcpC,UAA5B;AACH;;AACD,SAAKiB,KAAL,GAAa,KAAKuD,KAAL,CAAW,KAAKvD,KAAhB,EAAuB,CAAvB,CAAb;;AACA,QAAK,KAAKA,KAAN,IAAgB,GAApB,EAAyB;AACrB,WAAKsD,IAAL,GAAY,uBAAZ;AACA,WAAKE,aAAL,GAAqB,MAArB;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKE,IAAjB;AACH,KAJD,MAKK;AACD,WAAKA,IAAL,GAAY,mCAAZ;AACA,WAAKE,aAAL,GAAqB,KAArB;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKE,IAAjB;AACH;;AACD,WAAO,KAAKA,IAAZ;AACH;;AACDC,EAAAA,KAAK,CAACE,EAAD,EAAKC,UAAU,GAAG,CAAlB,EAAqB;AACtB,QAAIC,CAAC,GAAGF,EAAE,CAACG,QAAH,EAAR;AACA,QAAIC,CAAC,GAAGF,CAAC,CAACvC,MAAV;AACA,QAAI0C,aAAa,GAAGH,CAAC,CAACI,OAAF,CAAU,GAAV,IAAiB,CAArC;AACA,QAAIC,MAAM,GAAGL,CAAC,CAACM,MAAF,CAAS,CAAT,EAAYH,aAAa,GAAGJ,UAA5B,CAAb;AACA,WAAOQ,MAAM,CAACF,MAAD,CAAb;AACH;;AACD9F,EAAAA,aAAa,CAACoC,EAAD,EAAK;AACd;AACA,QAAI6D,OAAO,CAAE,yDAAF,CAAX,EAAwE;AACpE,WAAKvE,GAAL,CAASwE,gBAAT,CAA0B9D,EAA1B,EAA8BO,SAA9B,CAAwCwD,GAAG,IAAI;AAC3C,aAAKpE,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBqE,MAAvB,CAA8BC,IAAI,IAAIA,IAAI,CAACpG,sBAAL,KAAgCmC,EAAtE,CAAzB;AACA,aAAKS,OAAL,CAAa,KAAKd,iBAAlB;AACH,OAHD;AAIH;AACJ;;AACDuE,EAAAA,WAAW,GAAG;AACV;AACA,QAAIC,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAd;AACA,UAAMC,EAAE,GAAGjI,IAAI,CAACkI,KAAL,CAAWC,cAAX,CAA0BL,OAA1B,CAAX;AACA;;AACA,UAAMM,EAAE,GAAGpI,IAAI,CAACkI,KAAL,CAAWG,QAAX,EAAX;AACArI,IAAAA,IAAI,CAACkI,KAAL,CAAWI,iBAAX,CAA6BF,EAA7B,EAAiCH,EAAjC,EAAqC,QAArC;AACA;;AACAjI,IAAAA,IAAI,CAACuI,SAAL,CAAeH,EAAf,EAAmB,KAAKjF,QAAxB;AACH;;AAtI2B;;AAwIhCN,kBAAkB,CAAC2F,IAAnB,GAA0B,SAASC,0BAAT,CAAoCC,CAApC,EAAuC;AAAE,SAAO,KAAKA,CAAC,IAAI7F,kBAAV,EAA8B5C,EAAE,CAAC0I,iBAAH,CAAqBzI,EAAE,CAAC0I,cAAxB,CAA9B,EAAuE3I,EAAE,CAAC0I,iBAAH,CAAqBxI,EAAE,CAAC0I,WAAxB,CAAvE,EAA6G5I,EAAE,CAAC0I,iBAAH,CAAqBvI,EAAE,CAAC0I,UAAxB,CAA7G,EAAkJ7I,EAAE,CAAC0I,iBAAH,CAAqBzI,EAAE,CAAC6I,MAAxB,CAAlJ,CAAP;AAA4L,CAA/P;;AACAlG,kBAAkB,CAACmG,IAAnB,GAA0B,aAAc/I,EAAE,CAACgJ,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAErG,kBAAR;AAA4BsG,EAAAA,SAAS,EAAE,CAAC,CAAC,eAAD,CAAD,CAAvC;AAA4DC,EAAAA,KAAK,EAAE,EAAnE;AAAuEC,EAAAA,IAAI,EAAE,EAA7E;AAAiFC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,KAAJ,CAAD,EAAa,CAAC,CAAD,EAAI,QAAJ,EAAc,aAAd,EAA6B,MAA7B,CAAb,EAAmD,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAnB,EAAsB,KAAtB,EAA6B,aAA7B,EAA4C,CAA5C,EAA+C,YAA/C,CAAnD,EAAiH,CAAC,CAAD,EAAI,QAAJ,EAAc,SAAd,EAAyB,CAAzB,EAA4B,OAA5B,CAAjH,EAAuJ,CAAC,IAAD,EAAO,OAAP,EAAgB,MAAhB,EAAwB,OAAxB,EAAiC,IAAjC,EAAuC,aAAvC,EAAsD,CAAtD,EAAyD,OAAzD,EAAkE,aAAlE,CAAvJ,EAAyO,CAAC,OAAD,EAAU,KAAV,CAAzO,EAA2P,CAAC,CAAD,EAAI,OAAJ,EAAa,SAAb,CAA3P,EAAoR,CAAC,SAAD,EAAY,GAAZ,CAApR,EAAsS,CAAC,SAAD,EAAY,GAAZ,CAAtS,EAAwT,CAAC,SAAD,EAAY,GAAZ,CAAxT,EAA0U,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAnB,EAAsB,KAAtB,EAA6B,aAA7B,EAA4C,CAA5C,EAA+C,YAA/C,CAA1U,EAAwY,CAAC,MAAD,EAAS,QAAT,EAAmB,YAAnB,EAAiC,OAAjC,EAA0C,CAA1C,EAA6C,KAA7C,EAAoD,YAApD,EAAkE,CAAlE,EAAqE,OAArE,CAAxY,CAAzF;AAAijBC,EAAAA,QAAQ,EAAE,SAASC,2BAAT,CAAqChJ,EAArC,EAAyCC,GAAzC,EAA8C;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC5qBP,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,0BAAb;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,KAAlC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,GAA/C,EAAoD,CAApD;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,yBAAb;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,GAArB,EAA0B,CAA1B;AACAX,MAAAA,EAAE,CAACc,UAAH,CAAc,OAAd,EAAuB,SAAS0I,8CAAT,GAA0D;AAAE,eAAOhJ,GAAG,CAACoH,WAAJ,EAAP;AAA2B,OAA9G;AACA5H,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,UAArB;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,CAAV,EAAa,iBAAb;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,CAA9B,EAAiC,EAAjC,EAAqC,OAArC,EAA8C,EAA9C,EAAkD,IAAlD,EAAwD,EAAxD,EAA4D,IAA5D,EAAkE,CAAlE;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,IAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,WAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,kBAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,cAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,cAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,SAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,OAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,KAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,aAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,QAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,OAAtB;AACAX,MAAAA,EAAE,CAACyJ,UAAH,CAAc,EAAd,EAAkBnJ,iCAAlB,EAAqD,EAArD,EAAyD,EAAzD,EAA6D,IAA7D,EAAmE,CAAnE;AACAN,MAAAA,EAAE,CAAC0J,MAAH,CAAU,EAAV,EAAc,OAAd;AACA1J,MAAAA,EAAE,CAAC2J,SAAH,CAAa,EAAb,EAAiB,IAAjB;AACA3J,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB;AACAX,MAAAA,EAAE,CAAC2J,SAAH,CAAa,EAAb,EAAiB,IAAjB,EAAuB,CAAvB;AACA3J,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B,EAA+B,EAA/B,EAAmC,GAAnC;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV,EAAc,QAAd;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B,EAA+B,EAA/B,EAAmC,GAAnC;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAACW,cAAH,CAAkB,EAAlB,EAAsB,IAAtB,EAA4B,CAA5B,EAA+B,EAA/B,EAAmC,GAAnC;AACAX,MAAAA,EAAE,CAACY,MAAH,CAAU,EAAV;AACAZ,MAAAA,EAAE,CAACa,YAAH;AACAb,MAAAA,EAAE,CAAC2J,SAAH,CAAa,EAAb,EAAiB,IAAjB,EAAuB,CAAvB;AACA3J,MAAAA,EAAE,CAACa,YAAH;AACH;;AAAC,QAAIN,EAAE,GAAG,CAAT,EAAY;AACVP,MAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,MAAAA,EAAE,CAAC2C,sBAAH,CAA0B,YAA1B,EAAwC,WAAxC,EAAqDnC,GAAG,CAACsD,SAAzD,EAAoE,EAApE;AACA9D,MAAAA,EAAE,CAAC2B,SAAH,CAAa,EAAb;AACA3B,MAAAA,EAAE,CAAC4J,UAAH,CAAc,SAAd,EAAyB5J,EAAE,CAAC6J,WAAH,CAAe,EAAf,EAAmB,EAAnB,EAAuBrJ,GAAG,CAACuD,MAA3B,CAAzB;AACA/D,MAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,MAAAA,EAAE,CAAC8J,sBAAH,CAA0B,SAA1B,EAAqCtJ,GAAG,CAACoG,aAAzC,EAAwD,GAAxD;AACA5G,MAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,MAAAA,EAAE,CAACkC,kBAAH,CAAsB,EAAtB,EAA0B1B,GAAG,CAAC4C,KAA9B,EAAqC,KAArC;AACApD,MAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,MAAAA,EAAE,CAAC8J,sBAAH,CAA0B,SAA1B,EAAqCtJ,GAAG,CAACoG,aAAzC,EAAwD,GAAxD;AACA5G,MAAAA,EAAE,CAAC2B,SAAH,CAAa,CAAb;AACA3B,MAAAA,EAAE,CAACkC,kBAAH,CAAsB,GAAtB,EAA2B1B,GAAG,CAACkG,IAA/B,EAAqC,GAArC;AACH;AAAE,GAxEsD;AAwEpDqD,EAAAA,UAAU,EAAE,CAAC9J,EAAE,CAAC+J,kBAAJ,EAAwB5J,EAAE,CAAC6J,OAA3B,EAAoC5J,EAAE,CAAC6J,OAAvC,EAAgDjK,EAAE,CAACkK,UAAnD,CAxEwC;AAwEwBC,EAAAA,KAAK,EAAE,CAAC/J,EAAE,CAACgK,SAAJ,CAxE/B;AAwE+CC,EAAAA,MAAM,EAAE,CAAC,yKAAD;AAxEvD,CAArB,CAAxC","sourcesContent":["import 'chart.js';\r\nimport * as XLSX from 'xlsx';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"@angular/forms\";\r\nimport * as i3 from \"../core/services/api.service\";\r\nimport * as i4 from \"@angular/material/icon\";\r\nimport * as i5 from \"@angular/common\";\r\nfunction DashboardComponent_tr_33_Template(rf, ctx) { if (rf & 1) {\r\n    const _r8 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"td\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"td\");\r\n    i0.ɵɵtext(6);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(7, \"td\");\r\n    i0.ɵɵtext(8);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(9, \"td\");\r\n    i0.ɵɵtext(10);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(11, \"td\");\r\n    i0.ɵɵtext(12);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(13, \"td\");\r\n    i0.ɵɵtext(14);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(15, \"td\");\r\n    i0.ɵɵtext(16);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(17, \"td\");\r\n    i0.ɵɵtext(18);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(19, \"td\");\r\n    i0.ɵɵtext(20);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 10);\r\n    i0.ɵɵtext(23, \"Editar\");\r\n    i0.ɵɵelementEnd()();\r\n    i0.ɵɵelementStart(24, \"td\")(25, \"button\", 11);\r\n    i0.ɵɵlistener(\"click\", function DashboardComponent_tr_33_Template_button_click_25_listener() { const restoredCtx = i0.ɵɵrestoreView(_r8); const a_r1 = restoredCtx.$implicit; const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.deleteasignar(a_r1.idPorcentajeAsignacion); });\r\n    i0.ɵɵtext(26, \"Borrar\");\r\n    i0.ɵɵelementEnd()()();\r\n} if (rf & 2) {\r\n    const a_r1 = ctx.$implicit;\r\n    const i_r2 = ctx.index;\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(a_r1.idPorcentajeAsignacion);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(a_r1.matriculaUsuario);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(a_r1.nombreUsuario + \" \" + a_r1.apellidopaternoUsuario + \" \" + a_r1.apellidomaternoUsuario);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(a_r1.especialidad);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", a_r1.porcentaje, \" \");\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", a_r1 == null ? null : a_r1.rol == null ? null : a_r1.rol.sqRol, \" \");\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", a_r1 == null ? null : a_r1.squad == null ? null : a_r1.squad.nombreSquad, \" \");\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.tagNamesrol[i_r2], \" \");\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(a_r1.comentarios);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(a_r1.estado);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/editar/\", a_r1.idPorcentajeAsignacion, \"\");\r\n} }\r\nexport class DashboardComponent {\r\n    //roles: ListaRol[] = [];\r\n    constructor(route, formbulider, api, router) {\r\n        this.route = route;\r\n        this.formbulider = formbulider;\r\n        this.api = api;\r\n        this.router = router;\r\n        this.fileName = 'ExcelSheet.xlsx';\r\n        this.exportList = [];\r\n        this.total = 0;\r\n        this.Asignacionusuario = [];\r\n        this.tagNamesrol = [];\r\n        this.tagNamesapp = [];\r\n        this.tagNamessquad = [];\r\n    }\r\n    ngOnInit() {\r\n        this.getuser();\r\n    }\r\n    getuser() {\r\n        this.id = this.route.snapshot.paramMap.get('id');\r\n        this.retornoid = this.id;\r\n        this.result = this.api.getUsuario(this.retornoid);\r\n        this.api.getUsuario(this.retornoid).subscribe((rsult) => {\r\n            this.Asignacionusuario = rsult;\r\n            debugger;\r\n            this.findsum(this.Asignacionusuario);\r\n            this.returnall(this.Asignacionusuario);\r\n            // console.log(rsult);  \r\n        });\r\n    }\r\n    returnall(idtodos) {\r\n        this.dataall = idtodos;\r\n        for (let j = 0; j < this.dataall.length; j++) {\r\n            this.codrolid = this.dataall[j].idRol;\r\n            this.codappid = this.dataall[j].idAplicativo;\r\n            this.codsquad = this.dataall[j].idSquad;\r\n            this.api.getappid(this.codappid).subscribe((appdata) => {\r\n                this.appname = appdata;\r\n                this.tagNamesapp[j] = appdata.codAplicativo;\r\n            });\r\n            this.api.getroldid(this.codrolid).subscribe((roldata) => {\r\n                this.rolname = roldata;\r\n                this.tagNamesrol[j] = roldata.sqRol;\r\n            });\r\n            this.api.getsquadid(this.codsquad).subscribe((squaddata) => {\r\n                this.squadname = squaddata;\r\n                this.tagNamessquad[j] = squaddata.nombreSquad;\r\n            });\r\n        }\r\n    }\r\n    idreturnrol(idroles) {\r\n        this.rolid = idroles;\r\n        for (let j = 0; j < this.rolid.length; j++) {\r\n            this.codrolid = this.rolid[j].idRol;\r\n            this.api.getroldid(this.codrolid).subscribe((roldata) => {\r\n                this.rolname = roldata;\r\n                this.tagNamesrol[j] = roldata.sqRol;\r\n            });\r\n        }\r\n    }\r\n    idreturnapp(idapp) {\r\n        this.appid = idapp;\r\n        for (let j = 0; j < this.appid.length; j++) {\r\n            this.codappid = this.appid[j].idAplicativo;\r\n            this.api.getappid(this.codappid).subscribe((app) => {\r\n                this.appname = app;\r\n                this.tagNamesapp[j] = app.codaplicativo;\r\n            });\r\n        }\r\n    }\r\n    idreturnsquad(datasquad) {\r\n        this.squadid = datasquad;\r\n        for (let j = 0; j < this.squadid.length; j++) {\r\n            this.codsquad = this.squadid[j].idSquad;\r\n            this.api.getsquadid(this.codsquad).subscribe((squaddata) => {\r\n                this.squadname = squaddata;\r\n                this.tagNamessquad[j] = squaddata.nombreSquad;\r\n            });\r\n        }\r\n    }\r\n    idreturn(matricula) {\r\n        this.value = matricula;\r\n        console.log(this.value);\r\n        this.retornoid = this.value[0].matriculaUsuario;\r\n        this.rolid = this.value[0].idRol;\r\n        // console.log(this.retornoid)\r\n    }\r\n    findsum(data) {\r\n        this.text = \"\";\r\n        this.total = 0;\r\n        this.value = data;\r\n        // console.log(this.value);  \r\n        // console.log(this.total);  \r\n        for (let j = 0; j < data.length; j++) {\r\n            this.total += this.value[j].porcentaje;\r\n        }\r\n        this.total = this.trunc(this.total, 3);\r\n        if ((this.total) == 100) {\r\n            this.text = \"Asignación Completada\";\r\n            this.inputColorStr = \"blue\";\r\n            console.log(this.text);\r\n        }\r\n        else {\r\n            this.text = \"Por favor revisar el % Asignación\";\r\n            this.inputColorStr = \"red\";\r\n            console.log(this.text);\r\n        }\r\n        return this.text;\r\n    }\r\n    trunc(xe, posiciones = 0) {\r\n        var s = xe.toString();\r\n        var l = s.length;\r\n        var decimalLength = s.indexOf('.') + 1;\r\n        var numStr = s.substr(0, decimalLength + posiciones);\r\n        return Number(numStr);\r\n    }\r\n    deleteasignar(id) {\r\n        //  if (confirm(`¿Realmente quieres eliminar a ${this.idasigna}?`)) {\r\n        if (confirm(`¿Realmente quieres eliminar la asignación seleccionada?`)) {\r\n            this.api.deleteAsignacion(id).subscribe(res => {\r\n                this.Asignacionusuario = this.Asignacionusuario.filter(item => item.idPorcentajeAsignacion !== id);\r\n                this.findsum(this.Asignacionusuario);\r\n            });\r\n        }\r\n    }\r\n    exportexcel() {\r\n        /* table id is passed over here */\r\n        let element = document.getElementById('excel-table');\r\n        const ws = XLSX.utils.table_to_sheet(element);\r\n        /* generate workbook and add the worksheet */\r\n        const wb = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');\r\n        /* save to file */\r\n        XLSX.writeFile(wb, this.fileName);\r\n    }\r\n}\r\nDashboardComponent.ɵfac = function DashboardComponent_Factory(t) { return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ApiService), i0.ɵɵdirectiveInject(i1.Router)); };\r\nDashboardComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: DashboardComponent, selectors: [[\"app-dashboard\"]], decls: 48, vars: 12, consts: [[1, \"row\"], [1, \"col-12\", \"text-center\", \"my-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"routerLink\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [\"id\", \"table\", \"name\", \"table\", \"id\", \"excel-table\", 1, \"table\", \"table-hover\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"3\"], [\"colspan\", \"1\"], [\"colspan\", \"4\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn\", \"btn-danger\", 3, \"click\"]], template: function DashboardComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\");\r\n        i0.ɵɵtext(1, \"Lista de Asignaci\\u00F3n\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1)(4, \"a\", 2);\r\n        i0.ɵɵtext(5, \"Agregar Asignaci\\u00F3n\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(6, \"a\", 3);\r\n        i0.ɵɵlistener(\"click\", function DashboardComponent_Template_a_click_6_listener() { return ctx.exportexcel(); });\r\n        i0.ɵɵelementStart(7, \"mat-icon\");\r\n        i0.ɵɵtext(8, \" cloud_download\");\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵelementStart(9, \"table\", 4)(10, \"thead\")(11, \"tr\")(12, \"th\", 5);\r\n        i0.ɵɵtext(13, \"ID\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(14, \"th\", 5);\r\n        i0.ɵɵtext(15, \"MATRICULA\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(16, \"th\", 5);\r\n        i0.ɵɵtext(17, \"NOMBRE COMPLETO \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(18, \"th\", 5);\r\n        i0.ɵɵtext(19, \"ESPECIALIDAD\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(20, \"th\", 5);\r\n        i0.ɵɵtext(21, \"% ASIGNACION\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(22, \"th\", 5);\r\n        i0.ɵɵtext(23, \"COD APP\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(24, \"th\", 5);\r\n        i0.ɵɵtext(25, \"SQUAD\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(26, \"th\", 5);\r\n        i0.ɵɵtext(27, \"ROL\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(28, \"th\", 5);\r\n        i0.ɵɵtext(29, \"COMENTARIOS\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(30, \"th\", 5);\r\n        i0.ɵɵtext(31, \"ESTADO\");\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵelementStart(32, \"tbody\");\r\n        i0.ɵɵtemplate(33, DashboardComponent_tr_33_Template, 27, 11, \"tr\", 6);\r\n        i0.ɵɵpipe(34, \"async\");\r\n        i0.ɵɵelement(35, \"tr\");\r\n        i0.ɵɵelementStart(36, \"tr\");\r\n        i0.ɵɵelement(37, \"td\", 7);\r\n        i0.ɵɵelementStart(38, \"td\", 8)(39, \"b\");\r\n        i0.ɵɵtext(40, \"TOTAL:\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(41, \"td\", 8)(42, \"b\");\r\n        i0.ɵɵtext(43);\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(44, \"td\", 8)(45, \"b\");\r\n        i0.ɵɵtext(46);\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelement(47, \"td\", 9);\r\n        i0.ɵɵelementEnd()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/agregar/\", ctx.retornoid, \"\");\r\n        i0.ɵɵadvance(29);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(34, 10, ctx.result));\r\n        i0.ɵɵadvance(8);\r\n        i0.ɵɵstyleMapInterpolate1(\"color: \", ctx.inputColorStr, \" \");\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate1(\"\", ctx.total, \" % \");\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵstyleMapInterpolate1(\"color: \", ctx.inputColorStr, \" \");\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate1(\" \", ctx.text, \" \");\r\n    } }, directives: [i1.RouterLinkWithHref, i4.MatIcon, i5.NgForOf, i1.RouterLink], pipes: [i5.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkYXNoYm9hcmQuY29tcG9uZW50LmNzcyJ9 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}